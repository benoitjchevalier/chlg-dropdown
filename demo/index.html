<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>chlg-dropdown demo</title>

    <script src="../../webcomponentsjs/webcomponents-loader.js"></script>

    <link rel="import" href="../chlg-dropdown.html">
    <style>
      @font-face {
        font-family: "GE Inspira Sans";
        src: url("../css/GEInspiraSans.woff") format('woff');
      }
      body {
        font-family: "GE Inspira Sans";
        font-size: 15px;
        font-weight: 400;
      }
      .page {
        justify-content: center;
      }
      .main {
        padding: 50px;
        display: block;
        max-width: 1200px;
      }
      .container {
        display: flex;
        justify-content: space-evenly;
        border: 1px solid #ACACAC;
        padding: 10px;
      }
      .align {
        justify-content: space-evenly;
      }
      .flex {
        display: flex;
      }
      .flex--col {
        flex-flow: column;
      }
    </style>
  </head>
  <body>

    <div class="flex page">
      <div class="main">
        <h1>Challenge dropdown: thoughts, examples and how to</h1>
        <p>asiyfhsdhgkidhgusdhg dsihjgsdlkj gklsdjgk s sdkgf jsdlkfjskldjfklsjdkfjs jsildjg sdligjslidhg kljdsglk sjdklg jsldkjg lksdjf lksdjfkl sjdlkfjslkd jflksdj flks</p>
        <h2>Initial Considerations</h2>
        <p>Polymer + iron-dropdown</p>
        <h2>Basic Dropdown</h2>

        <h2>Styling</h2>
        <p>The dropdown is currently styled using sass and css variables. The css variables allow flexibility: they could be used in a theme where theme file would define those variables to what the dropdown should look like, allowing for applying different themes easily. They also allow custom external override, giving flexibility for external developers to style the dropdown as well as override a potential theme. This can be useful for styling dropdowns differently based on their use (navigation vs selection for example). Please see the <a href="https://benoitjchevalier.github.io/chlg-dropdown/demo/api.html">the API</a> for a list of the currently available css variables. More variables can be added for finer granular control of the styling.</p>
        <p>The default style makes use of the different state of the trigger: hovered, pressed and normal. The dropdown items use different shades of blue to represent selection and hover, allowing distinction by color blind people. Focus on an item, useful for keyboard navigation, is represented by a black border.</p>

        <h2>Mouse Interaction</h2>
        <p>The dropdown can use three different types of mouse interaction based on the "interactionMode" property:</p>
        <ul>
          <li>Click (default): the menu will be opened when clicking on the trigger. It will be closed when clicking on the trigger again, or anywhere outside of the menu. When clicking an item the menu will close if in "single" mode and will stay open for further selection if in "multi" mode.</li>
          <li>Hover: the menu will open when hovering the trigger and close when the mouse gets out of the trigger or menu. It will also close when selecting an item in a similar way as "Click".</li>
          <li>None: no opening behavior will be provided, but the dropdown will still close on outside click. It gives full control to the external developper for custom behaviors.</li>
        </ul>
        <p>Please note that this only impacts mouse behavior but keyboard navigation will always be available.</p>

        <div class="container">
          <div class="flex flex--col">
            <h4>Click</h4>
            <chlg-dropdown items='[{"key": 1, "value": "Cats"}, {"key": 2, "value": "Dogs"}, {"key": 3, "value": "Pandas"}]'></chlg-dropdown>
          </div>
          <div class="flex flex--col">
            <h4>Hover</h4>
            <chlg-dropdown interaction-mode="hover" items='[{"key": 1, "value": "Cats"}, {"key": 2, "value": "Dogs"}, {"key": 3, "value": "Pandas"}]'></chlg-dropdown>
          </div>
          <div class="flex flex--col">
            <h4>None</h4>
            <chlg-dropdown interaction-mode="none" items='[{"key": 1, "value": "Cats"}, {"key": 2, "value": "Dogs"}, {"key": 3, "value": "Pandas"}]'></chlg-dropdown>
          </div>
        </div>

        <h2>Custom Trigger</h2>
        <p>By default the dropdown has its own trigger, which is the visible component the user will interact with in order to open/close the menu. The trigger will also try to reflect the current selection in the dropdown. It can be styled through css variables and configured to some extents: the chevron can be hidden and a custom function can be passed to decide what text the trigger should display based on currently selected values.</p>
        <p>However if that is not enough a custom trigger can be passed in through the slot API, allowing an external developper to take full control of the trigger appearance and behavior. By default the custom trigger will still try to use the default interaction based on the "interactionMode" property.</p>

        <div class="container">
          <div class="flex flex--col">
            <h4>Default trigger</h4>
            <chlg-dropdown items='[{"key": 1, "value": "Cats"}, {"key": 2, "value": "Dogs"}, {"key": 3, "value": "Pandas"}]'></chlg-dropdown>
          </div>
          <div class="flex flex--col">
            <h4>Custom trigger, just a salmon div</h4>
            <chlg-dropdown items='[{"key": 1, "value": "Cats"}, {"key": 2, "value": "Dogs"}, {"key": 3, "value": "Pandas"}]'>
              <div slot="trigger" style="background-color:salmon">I like salmon</div>
            </chlg-dropdown>
          </div>
          <div class="flex flex--col">
            <h4>Custom trigger and hover mode</h4>
            <chlg-dropdown interaction-mode="hover" items='[{"key": 1, "value": "Cats"}, {"key": 2, "value": "Dogs"}, {"key": 3, "value": "Pandas"}]'>
              <div slot="trigger" style="background-color:salmon">I like salmon</div>
            </chlg-dropdown>
          </div>
        </div>

        <h3>Keyboard Navigation</h3>
        <h2>Accessibility</h2>
        <p>The dropdown has been designed with accessibility in mind. The color scheme allows color blind people to differentiate between different state. Keyboard navigation is available: when the trigger is focused the dropdown can be opened with Space and Enter. The first item is focused and focus can be changed with Up and Down. Selection can be made with Space/Enter and the dropdown can be closed with Esc.</p>
        <p>The dropdown also follows WAI-ARIA principles, ensuring the browser knows the trigger controls a menu and dynamically letting it know what is hidden and visible through aria-hidden.</p>

        <div class="container">
          <div class="flex flex--col">
            <h4>Click to give focus to the dropdown and start keyboard navigation</h4>
            <button id="focus">Focus</button>
          </div>
          <div class="flex flex--col">
            <h4>Try keyboard navigation</h4>
            <chlg-dropdown id="toFocus" items='[{"key": 1, "value": "Cats"}, {"key": 2, "value": "Dogs"}, {"key": 3, "value": "Pandas"}]'></chlg-dropdown>
          </div>
        </div>

        <h2>Multi Mode</h2>
        <h2>Search Mode</h2>

        <h3>Bloh</h3>
        <p>Blouh</p>
      </div>
    </div>


    
  </body>
  <script>
    window.addEventListener('WebComponentsReady', () => {
      const focusButton = document.getElementById('focus'),
            ddToFocus = document.getElementById('toFocus');

      focusButton.addEventListener('click', () => {
        ddToFocus.focus();
      });
      // const multiDropdown = document.getElementById('multi'),
      //     reflectText = document.getElementById('reflect');

      // multiDropdown.addEventListener('opened-changed', () => {
      //   reflectText.innerText = 'Selected values: ' + JSON.stringify(multiDropdown.selectedValues);
      // });

      // multiDropdown.addEventListener('selectedValues-changed', () => {
      //   reflectText.innerText = 'Selected values: ' + JSON.stringify(multiDropdown.selectedValues);
      // });
    });



  </script>
</html>
